# Replace example.com with your domain. Caddy will get a Let's Encrypt cert.
example.com {
  # FastAPI at /
  handle {
    reverse_proxy api:8000
  }

  handle_path /pg* {
    reverse_proxy pgadmin:80
  }

  handle_path /src* {
    reverse_proxy pgweb_src:8081
  }

  handle_path /dest* {
    reverse_proxy pgweb_dst:8081
  }
}

# Optional: also redirect plain HTTP to HTTPS
:80 {
  redir https://{host}{uri} permanent
}
